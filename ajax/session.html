{
  "title": "Session Management",
  "content": "<h2>The Login And Admin Operations In Idio</h2>\n\n<p>\n  The Koa2 web-server actually includes the cookies management package called cookies. The session service package, *<strong>koa-session</strong>* instantiates the session object for the context on each request whenever the <span class=\"tm\">session</span> property is accessed, and uses cookies to store the info that is written to <span class=\"tm2\">ctx.session</span>.\n</p>\n\n<p>\n  The cookies are signed which means that they are hashed and the key is sent to the user in a separate <span class=\"tm\">{cookie-name}:sig</span> cookie. This ensures that users cannot see what's inside of the cookie, because the hash is signed with the key properties set at the start of the server. The keys configuration passed to the session object will be set on the <span class=\"tm2\">app</span> object, otherwise the session middleware constructor will throw an error.\n</p>\n\n<li><a href=\"https://github.com/idiocc/session\">\n   Session</a> The session provides abstraction over cookies, manages the state in the cookie.</li>\n<li><a href=\"https://github.com/idiocc/cookies\">\n   Cookies</a> The underlying Koa-consumed library, which can use KeyGrip. The idio fork puts <span class=\"tm\">cookies</span> and <em>Keygrip</em> together.</li>\n<li><a href=\"https://github.com/idiocc/cookies/blob/71da62bc46a5cbd17be0cea0c0c38f68f97dd3ba/src/index.js#L31\">\n   Keygrip</a> The class to rotate and validate keys.</li>\n\n<pre><code class=\"js hljs\"><span class=\"hljs-keyword\">import</span> idio <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@idio/idio'</span>\n\n(<span class=\"hljs-keyword\">async</span> () =&gt; {\n  <span class=\"hljs-keyword\">await</span> idio({\n    <span class=\"hljs-attr\">session</span>: { <span class=\"hljs-attr\">use</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-attr\">keys</span>:\n        [ <span class=\"hljs-string\">'NON | example'</span>,\n          <span class=\"hljs-string\">'PROD| keys'</span>] },\n  })\n})()</code></pre>\n\nThe keys object can be a <a href=\"https://github.com/idiocc/cookies#class-keygrip\">\n   Keygrip</a> instance, which must be imported from <span class=\"tm\">@idio</span> as well, however the below is equivalent to passing the keys as an array:\n\n<pre><code class=\"js hljs\"><span class=\"hljs-keyword\">import</span> idio <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@idio/idio'</span>\n\n(<span class=\"hljs-keyword\">async</span> () =&gt; {\n  <span class=\"hljs-comment\">/* start example */</span>\n  <span class=\"hljs-keyword\">import</span> { Keygrip } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@idio/idio'</span>\n\n  <span class=\"hljs-keyword\">const</span> keys = <span class=\"hljs-keyword\">new</span> Keygrip([<span class=\"hljs-string\">'rotat1'</span>, <span class=\"hljs-string\">'rotat2'</span>])\n  <span class=\"hljs-keyword\">const</span> { app, url } = <span class=\"hljs-keyword\">await</span> idio({\n    <span class=\"hljs-attr\">session</span>: { <span class=\"hljs-attr\">use</span>: <span class=\"hljs-literal\">true</span>, keys },\n  })\n  <span class=\"hljs-comment\">/* end example */</span>\n  <span class=\"hljs-built_in\">console</span>.log(url)\n  app.destroy()\n})()</code></pre>",
  "file": "session",
  "postAjax": ""
}